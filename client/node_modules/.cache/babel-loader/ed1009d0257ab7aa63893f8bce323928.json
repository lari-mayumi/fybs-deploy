{"ast":null,"code":"var _jsxFileName = \"E:\\\\React\\\\fybs_project\\\\fybs\\\\fybs\\\\client\\\\src\\\\Components\\\\Post.js\",\n    _s = $RefreshSig$();\n\nimport \"./Post.modules.css\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useState } from \"react\";\nimport Axios from \"axios\";\nimport blackheart from \"../img/blackheart.png\";\nimport redheart from \"../img/redheart.png\";\nimport blackshare from \"../img/blackshare.png\";\nimport blueshare from \"../img/blueshare.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Post(_ref) {\n  _s();\n\n  let {\n    user,\n    texto,\n    id\n  } = _ref;\n  const [perfil, setPerfil] = useState([]);\n  const [likeList, setLikeList] = useState([]);\n  const navigate = useNavigate();\n  let userid = parseInt(localStorage.getItem(\"id\"));\n  let fotoPerfil = \"\";\n  let heart = redheart;\n  let share = blackshare;\n  let like = 0;\n  let i = 0;\n  let verperfil = \"/verperfil/\" + user;\n\n  const getData = () => {\n    Axios.get(\"http://localhost:3001/users\").then(response => {\n      setPerfil(response.data);\n    });\n    i = 0;\n\n    while (i < perfil.length) {\n      if (user === perfil[i].nome) {\n        fotoPerfil = perfil[i].foto; //seta a foto de perfil do dono do post\n      }\n\n      i = i + 1;\n    }\n\n    Axios.get(\"http://localhost:3001/likes\").then(response => {\n      //seleciona todos os dados de likes\n      setLikeList(response.data);\n    }); //console.log(likeList)\n\n    while (i < likeList.length) {\n      //verifica se o user está dando like ou dislike\n      if (likeList[i].userID === userid && likeList[i].postId === id) {\n        //console.log(\"like\")\n        like = 1;\n        heart = redheart;\n      }\n\n      i = i + 1;\n    }\n  };\n\n  const darLike = () => {\n    /*i = 0\r\n    while (i < likeList.length){ //verifica se o user está dando like ou dislike\r\n        if (likeList[i].userID === userid && likeList[i].postId === id) {\r\n            //console.log(\"like\")\r\n            like = 1\r\n        } \r\n        i = i + 1;\r\n    } */\n    console.log(userid, id);\n\n    if (like === 0) {\n      Axios.post(\"http://localhost:3001/addlike\", {\n        user: userid,\n        post: id\n      }).then(() => {\n        console.log(\"success\");\n      });\n      heart = redheart; //botão não está mudando\n    } else {\n      heart = blackheart;\n    }\n    /*\r\n    if (heart === blackheart){\r\n        heart = redheart;\r\n        console.log(\"Vermelho\");\r\n    }\r\n    else {\r\n        heart = blackheart;\r\n        console.log(\"Preto\");\r\n    }*/\n    //window.location.reload()\n\n  };\n\n  getData();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"userPost\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"profile-pic mr-3\",\n        src: fotoPerfil\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btnUser\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          class: \"btnUser\",\n          href: verperfil,\n          children: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"corpoPost\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"texto\",\n          children: texto\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btnIntercoes\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: darLike,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profile-pic mr-3\",\n            src: heart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profile-pic mr-3\",\n            src: share\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"profile-pic mr-3\",\n          src: \"https://i.pinimg.com/236x/1e/04/fd/1e04fd17f397b0513736628602fd9583.jpg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Post, \"LvGEvv7AlO+/PwYnU/TeZXU/vFc=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["Link","useNavigate","useState","Axios","blackheart","redheart","blackshare","blueshare","Post","user","texto","id","perfil","setPerfil","likeList","setLikeList","navigate","userid","parseInt","localStorage","getItem","fotoPerfil","heart","share","like","i","verperfil","getData","get","then","response","data","length","nome","foto","userID","postId","darLike","console","log","post"],"sources":["E:/React/fybs_project/fybs/fybs/client/src/Components/Post.js"],"sourcesContent":["import \"./Post.modules.css\";\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nimport { useState } from \"react\";\r\nimport Axios from \"axios\";\r\nimport blackheart from \"../img/blackheart.png\"\r\nimport redheart from \"../img/redheart.png\"\r\nimport blackshare from \"../img/blackshare.png\"\r\nimport blueshare from \"../img/blueshare.png\"\r\n\r\nfunction Post({ user, texto, id }) {\r\n    const [perfil, setPerfil] = useState([]);\r\n    const [likeList, setLikeList] = useState([]);\r\n    const navigate = useNavigate();\r\n    let userid = parseInt(localStorage.getItem(\"id\"));\r\n    let fotoPerfil = \"\";\r\n\r\n    let heart = redheart;\r\n    let share = blackshare;\r\n    let like = 0;\r\n    let i = 0;\r\n\r\n    let verperfil = \"/verperfil/\" + user\r\n\r\n    const getData = () => {\r\n        Axios.get(\"http://localhost:3001/users\").then((response) => { \r\n            setPerfil(response.data);\r\n        });\r\n\r\n        i = 0;\r\n        while (i < perfil.length){   \r\n            if (user === perfil[i].nome) {\r\n                fotoPerfil = perfil[i].foto; //seta a foto de perfil do dono do post\r\n            }\r\n            i = i + 1;\r\n        } \r\n      \r\n        Axios.get(\"http://localhost:3001/likes\").then((response) => { //seleciona todos os dados de likes\r\n            setLikeList(response.data);\r\n        });\r\n        //console.log(likeList)\r\n        while (i < likeList.length){ //verifica se o user está dando like ou dislike\r\n            if (likeList[i].userID === userid && likeList[i].postId === id) {\r\n                //console.log(\"like\")\r\n                like = 1\r\n                heart = redheart;\r\n            } \r\n            i = i + 1;\r\n        }\r\n    }\r\n\r\n    const darLike = () =>{\r\n        /*i = 0\r\n        while (i < likeList.length){ //verifica se o user está dando like ou dislike\r\n            if (likeList[i].userID === userid && likeList[i].postId === id) {\r\n                //console.log(\"like\")\r\n                like = 1\r\n            } \r\n            i = i + 1;\r\n        } */\r\n        console.log(userid, id)\r\n        if (like === 0){\r\n            Axios.post(\"http://localhost:3001/addlike\", { \r\n                user: userid,\r\n                post: id\r\n                \r\n            }).then(() => {\r\n                console.log(\"success\");\r\n            });\r\n            heart = redheart; //botão não está mudando\r\n        } else {\r\n            heart = blackheart;\r\n        }\r\n        /*\r\n        if (heart === blackheart){\r\n            heart = redheart;\r\n            console.log(\"Vermelho\");\r\n        }\r\n        else {\r\n            heart = blackheart;\r\n            console.log(\"Preto\");\r\n        }*/\r\n        //window.location.reload()\r\n    }\r\n\r\n    getData();\r\n\r\n    return (\r\n        <div className=\"post\">\r\n            <div className=\"userPost\">\r\n                <img className=\"profile-pic mr-3\" src={fotoPerfil} />\r\n                <button className=\"btnUser\"><a class=\"btnUser\" href={verperfil}>{user}</a></button>\r\n                <div className=\"corpoPost\">\r\n                    <p className=\"texto\">{texto}</p>\r\n                </div>\r\n                <div className=\"btnIntercoes\">\r\n                <button onClick={darLike}><img className=\"profile-pic mr-3\" src={heart} /></button>\r\n                <button><img className=\"profile-pic mr-3\" src={share} /></button>\r\n                <img className=\"profile-pic mr-3\" src=\"https://i.pinimg.com/236x/1e/04/fd/1e04fd17f397b0513736628602fd9583.jpg\" /> \r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}